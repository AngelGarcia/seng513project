var util = require('util'),
	dbAccess = require('dbAccess'),
	email = require('node_mailer/lib/node_mailer'),
	//settings = require('settings'),
	serverHostName = 'smtp.gmail.com', //settings.getSetting('smtp_server_name'),
	serverPortNumber = 454, //settings.getSetting('smtp_server_port'),
	userName = (new Buffer("civicconnect@gmail.com")).toString("base64"),//(new Buffer(settings.getSetting('email_account'))).toString("base64"),
	emailPassword = (new Buffer("webengineering")).toString("base64");//(new Buffer(settings.getSetting('email_password'))).toString("base64"),

exports.sendEmailUserId = function(userId, subject, body, callback) {
	// Get the email address of the user
	var dbAccess = require('dbAccess');
	var q = "SELECT ";
	
	var toemail = 'sabad66@hotmail.com';
	
	var params = {
		host: serverHostName,
		port: serverPortNumber,
		domain: serverHostName,
		authentication: "login",
		username: userName,
		password: emailPassword,
		to: toemail,
		from: userName,
		subject: subject,
		body: body
	};
	
	email.send(params, function (error, result) {
		if (error) util.log(error);
		util.log(result);
		if (callback instanceof Function) callback(error, result);
	});
}
