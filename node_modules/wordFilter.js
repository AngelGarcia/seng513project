/* wordFilter.js 
 * Provides functionality for analyzing potentially offensive words within text strings 
 */ 
 
var offensiveWordList = new Array(); 
offensiveWordList.push(/\bas*hole\b/i);
offensiveWordList.push(/\bfu*ck\b/i);
offensiveWordList.push(/\bshi*t\b/i);
offensiveWordList.push(/\bdumbas*\b/i);
offensiveWordList.push(/\bmotherfu*cker\b/i);
offensiveWordList.push(/\bbi*tch\b/i);

/* countOffensiveWords
 * Counts the number of instances of offensive words that occur in a specified text
 * 
 * 'text' The text string to be analyzed 
 */ 
exports.countOffensiveWords = function(text) {
	var offensiveWordCount = 0; 
	var minWordLength = 3; 
	var textWords = text.split(/\s+/); 
	for (var i = 0; i < textWords.length; i++) 
	{
		word = textWords[i];
		if (word.length < minWordLength) { continue; }
		if (exports.isWordOffensive(word)) {
			offensiveWordCount++; 
		}
	}
	return offensiveWordCount; 
}

/* isWordOffensive 
 * Checks if a word is offensive or not
 *
 * 'word' The word to be checked 
 */
exports.isWordOffensive = function(word) {
	for (offWord in offensiveWordList) {
		if (offensiveWordList[offWord].test(word)) {
			return true; 
		}			
	}
	return false; 
}

/* addWord 
 * Adds a new offensive word to the list 
 *
 * 'word' The word to add
 */ 
exports.addWord = function(word) {
	var newWord = '\\b' + word + '\\b'; 
	offensiveWordList.push(new RegExp(newWord,'i')); 
}
