var dbAccess = require('dbAccess');
var url = require('url');

var ViewProfile = exports.ViewProfile = function() {};

/**
 * Display a profile page
 * @param request Request object from the client
 * @param response Response object to send the data
 */
ViewProfile.display = function(request, response)
{
	request.getUser(function(error, user)
	{
		if(error)
			throw error;
		
		if(!user)
		{
			response.render('views/signIn.html', {error: 'Please log in before viewing your profile.'})
		}
		else
		{
			variables = {
				name: user.name,
				neighborhood: user.neighborhood || '',
				postal_code: user.postal_code || '',
				facebook_account: user.facebook_account || 'None',
				twitter_account: user.twitter_account || 'None'
			}
			
			response.render('views/viewProfile.html', variables);
		}
	});
}
